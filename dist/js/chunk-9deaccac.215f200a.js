(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9deaccac"],{"3b0b":function(t,e,r){},"459b":function(t,e,r){"use strict";r("505c")},"505c":function(t,e,r){},"51d7":function(t,e,r){},"5e23":function(t,e,r){},"71d9":function(t,e,r){"use strict";var s=r("3835"),a=r("5530"),n=(r("a9e3"),r("e25e"),r("0481"),r("4160"),r("5e23"),r("8dd9")),o=r("adda"),i=r("80d2"),c=r("d9bd");e["a"]=n["a"].extend({name:"v-toolbar",props:{absolute:Boolean,bottom:Boolean,collapse:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{default:48,type:[Number,String]},flat:Boolean,floating:Boolean,prominent:Boolean,short:Boolean,src:{type:[String,Object],default:""},tag:{type:String,default:"header"}},data:function(){return{isExtended:!1}},computed:{computedHeight:function(){var t=this.computedContentHeight;if(!this.isExtended)return t;var e=parseInt(this.extensionHeight);return this.isCollapsed?t:t+(isNaN(e)?0:e)},computedContentHeight:function(){return this.height?parseInt(this.height):this.isProminent&&this.dense?96:this.isProminent&&this["short"]?112:this.isProminent?128:this.dense?48:this["short"]||this.$vuetify.breakpoint.smAndDown?56:64},classes:function(){return Object(a["a"])(Object(a["a"])({},n["a"].options.computed.classes.call(this)),{},{"v-toolbar":!0,"v-toolbar--absolute":this.absolute,"v-toolbar--bottom":this.bottom,"v-toolbar--collapse":this.collapse,"v-toolbar--collapsed":this.isCollapsed,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--flat":this.flat,"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.isProminent})},isCollapsed:function(){return this.collapse},isProminent:function(){return this.prominent},styles:function(){return Object(a["a"])(Object(a["a"])({},this.measurableStyles),{},{height:Object(i["f"])(this.computedHeight)})}},created:function(){var t=this,e=[["app","<v-app-bar app>"],["manual-scroll",'<v-app-bar :value="false">'],["clipped-left","<v-app-bar clipped-left>"],["clipped-right","<v-app-bar clipped-right>"],["inverted-scroll","<v-app-bar inverted-scroll>"],["scroll-off-screen","<v-app-bar scroll-off-screen>"],["scroll-target","<v-app-bar scroll-target>"],["scroll-threshold","<v-app-bar scroll-threshold>"],["card","<v-app-bar flat>"]];e.forEach((function(e){var r=Object(s["a"])(e,2),a=r[0],n=r[1];t.$attrs.hasOwnProperty(a)&&Object(c["a"])(a,n,t)}))},methods:{genBackground:function(){var t={height:Object(i["f"])(this.computedHeight),src:this.src},e=this.$scopedSlots.img?this.$scopedSlots.img({props:t}):this.$createElement(o["a"],{props:t});return this.$createElement("div",{staticClass:"v-toolbar__image"},[e])},genContent:function(){return this.$createElement("div",{staticClass:"v-toolbar__content",style:{height:Object(i["f"])(this.computedContentHeight)}},Object(i["l"])(this))},genExtension:function(){return this.$createElement("div",{staticClass:"v-toolbar__extension",style:{height:Object(i["f"])(this.extensionHeight)}},Object(i["l"])(this,"extension"))}},render:function(t){this.isExtended=this.extended||!!this.$scopedSlots.extension;var e=[this.genContent()],r=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return this.isExtended&&e.push(this.genExtension()),(this.src||this.$scopedSlots.img)&&e.unshift(this.genBackground()),t(this.tag,r,e)}})},"8ce9":function(t,e,r){},"954f":function(t,e,r){"use strict";r("3b0b")},"99d9":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var s=r("b0af"),a=r("80d2"),n=Object(a["g"])("v-card__actions"),o=Object(a["g"])("v-card__subtitle"),i=Object(a["g"])("v-card__text"),c=Object(a["g"])("v-card__title");s["a"]},b0d2:function(t,e,r){"use strict";r("51d7")},ce7e:function(t,e,r){"use strict";var s=r("5530"),a=(r("8ce9"),r("7560"));e["a"]=a["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:Object(s["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(s["a"])({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},fe5e:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"transfer-page"},[r("layout",{class:{blur:t.showPin},attrs:{header:t.tokenByName.name,receive:!0},on:{onBack:function(e){return t.$router.push("/")},receive:function(e){t.dialog=!0}},scopedSlots:t._u([{key:"content",fn:function(){return[r("v-col",{attrs:{cols:"12",xs:"12",sm:"8",md:"6",lg:"4"}},[r("v-row",{staticClass:"pb-5",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"box-detail",attrs:{elevation:"0"}},[r("v-toolbar",{attrs:{color:"#c71e2b",dark:""}},[r("div",[t._v(" Balance : "+t._s(t.parseUtillETH(t.tokenByName.balance))+" ")]),r("v-spacer"),r("div",[r("v-img",{attrs:{src:t.tokenByName.logoURI,height:"30px",width:"30px",contain:""}})],1)],1),r("div",{staticClass:"pa-4 mt-4"},[r("v-form",{ref:"form",staticClass:"text-right",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{outlined:"","background-color":"white",rules:t.itemRules,label:"หมายเลขกระเป๋า",required:""},model:{value:t.form.to,callback:function(e){t.$set(t.form,"to",e)},expression:"form.to"}}),r("v-text-field",{attrs:{type:"number",outlined:"","background-color":"white",rules:[function(t){return!!t||"กรุณากรอกข้อมูล"},function(t){return parseFloat(t)>0||"จำนวนต้องมากกว่า 0"},function(e){return parseFloat(e)<=parseFloat(t.tokenByName.balance)||"จำนวนไม่ถูกต้อง"}],label:"จำนวน",required:""},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),r("v-btn",{staticClass:"mr-2",attrs:{text:""},on:{click:t.reset}},[t._v(" เคลียร์ ")]),r("v-btn",{staticClass:"ml-2",attrs:{disabled:!t.valid,color:"#c71e2b"},on:{click:t.validate}},[r("span",{staticClass:"white--text"},[t._v(" โอนเหรียญ ")])])],1)],1)],1)],1),r("v-col",{directives:[{name:"show",rawName:"v-show",value:t.showPage,expression:"showPage"}],staticClass:"mt-30",attrs:{cols:"12"}},[r("div",{staticClass:"d-flex align-center"},[r("v-icon",{attrs:{large:""}},[t._v(" history ")]),r("span",{staticClass:"ml-1"},[t._v("ประวัติการทำทำรายการ")])],1),r("v-card",{staticClass:"box-detail mt-2",attrs:{elevation:"0"}},[t.historyByToken.length>0?r("div",t._l(t.historyByToken,(function(e,s){return r("history-item",{key:"historyByToken"+s,attrs:{hash:e.hash,from:e.from,timeStamp:e.timeStamp,tokenSymbol:e.tokenSymbol,value:e.value,lastChild:s>=t.historyByToken.length-1}})})),1):r("div",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"100px"}},[t._v(" ไม่มีข้อมูล... ")])])],1)],1)],1)]},proxy:!0}])}),t.showPin?r("pin-pad",{attrs:{header:"กรุณาใส่รหัส",verify:!0,backward:!0},on:{goback:function(e){t.showPin=!1},verifyPin:t.sendToken}}):t._e(),r("v-dialog",{attrs:{"max-width":"350"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("my-qrcode",{attrs:{value:JSON.stringify({type:"transfer",to:t.ethereumAddress,contractAddress:t.tokenByName.address})}})],1)],1)},a=[],n=r("1da1"),o=(r("96cf"),r("e25e"),r("08cd")),i=r("6b31"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-text",[r("v-row",{staticClass:"pt-5",attrs:{justify:"center"}},[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("qrcode",{attrs:{value:t.value,options:{width:200}}})],1),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("p",[t._v("หมายเลขกระเป๋าของฉัน")]),r("input",{ref:"ethWallet",staticClass:"input-wallet",attrs:{type:"text",readonly:""},domProps:{value:t.ethereumAddress},on:{click:t.Copy}})])],1)],1)],1)},l=[],u=r("b2e5"),d=r.n(u),h={name:"QRCODE",props:{value:{type:String,default:""}},components:{qrcode:d.a},methods:{Copy:function(){try{this.$refs.ethWallet.select(),document.execCommand("copy"),this.alert_show({type:"success",title:"Copied on clipboard !"})}catch(t){}}}},p=h,v=(r("459b"),r("2877")),f=r("6544"),m=r.n(f),b=r("b0af"),g=r("99d9"),x=r("62ad"),y=r("0fd9"),w=Object(v["a"])(p,c,l,!1,null,null,null),k=w.exports;m()(w,{VCard:b["a"],VCardText:g["a"],VCol:x["a"],VRow:y["a"]});var C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{staticClass:"historyItem",attrs:{"no-gutters":"",align:"center"},on:{click:function(e){return t.openLink(t.hash)}}},[r("v-col",{attrs:{cols:"1"}},[r("div",{staticClass:"icon-shuff"},[t.checkOut(t.from)?r("v-icon",{attrs:{dark:"",color:"#FF9300",size:"28"}},[t._v(" remove_circle ")]):r("v-icon",{attrs:{dark:"",color:"#31B7C0",size:"28"}},[t._v(" add_circle ")])],1)]),r("v-col",{staticClass:"detail-body",attrs:{cols:"8"}},[r("div",[t._v("Tx hash: "+t._s(t.hash))]),r("div",[t._v(" "+t._s(t.DateTime(new Date(1e3*parseInt(t.timeStamp))))+" ")])]),r("v-col",{staticClass:"text-right",attrs:{cols:"3"}},[r("span",{staticClass:"d-block w-100 money text-xs-right",class:{wd:t.checkOut(t.from)}},[t._v(t._s(t.checkOut(t.from)?"-":"+")+" "+t._s(t.parseUtillETH(t.value)))]),r("span",{staticClass:"sk text-xs-right",class:{wd:t.checkOut(t.from)}},[r("span",[t._v(t._s(t.tokenSymbol))])])]),t.lastChild?t._e():r("v-col",{staticClass:"pt-2 px-2",attrs:{cols:"12"}},[r("v-divider")],1)],1)},_=[],$={name:"HistoryItem",props:{hash:{type:String,default:""},from:{type:String,default:""},timeStamp:{type:String,default:""},value:{type:String,default:"0"},tokenSymbol:{type:String,default:"XTH"},lastChild:{type:Boolean,default:!1}},methods:{openLink:function(t){window.open("https://exp.xchain.asia/tx/"+t,"_blank")},checkOut:function(t){return console.log(),t.toLowerCase()===String(this.ethereumAddress).toLowerCase()}}},B=$,O=(r("954f"),r("ce7e")),j=r("132d"),S=Object(v["a"])(B,C,_,!1,null,null,null),P=S.exports;m()(S,{VCol:x["a"],VDivider:O["a"],VIcon:j["a"],VRow:y["a"]});var E={name:"Token",components:{layout:o["a"],"pin-pad":i["a"],"my-qrcode":k,"history-item":P},data:function(){return{dialog:!1,showPin:!1,showPage:!1,valid:!0,itemRules:[function(t){return!!t||"กรุณากรอกข้อมูล"},function(t){return/^0x[a-fA-F0-9]{40}$/g.test(t)||"กรุณากรอกข้อมูลให้ถูกต้อง"}],form:{to:null,amount:null,text:null},transferInstance:null}},computed:{tokenByName:function(){return this.$store.getters.tokenByName(this.$route.params.token)},historyByToken:function(){return this.$store.getters.historyByToken(this.tokenByName.address)}},methods:{sendToken:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a,n,o,i,c,l,u,d,h,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=63;break}return e.showPin=!1,r.prev=2,r.next=5,new e.$ethers.providers.JsonRpcProvider("https://rpc.tbwg.io");case 5:return s=r.sent,r.next=8,new e.$ethers.Wallet(e.$store.state.auth.me.privateKey,s);case 8:return a=r.sent,r.next=11,e.$ethers.utils.parseUnits(e.form.amount,18);case 11:return n=r.sent,r.next=14,e.form.to;case 14:return o=r.sent,i="0x100000",r.next=18,e.app_loading(!0);case 18:return r.next=20,s.getGasPrice();case 20:return c=r.sent,r.next=23,e.$ethers.utils.hexlify(parseInt(c));case 23:if(l=r.sent,"mainnet"==e.tokenByName.address){r.next=43;break}return r.prev=25,r.next=28,new e.$ethers.Contract(e.tokenByName.address,e.$abi,a);case 28:return u=r.sent,r.next=31,u.transfer(o,n);case 31:return d=r.sent,r.next=34,d.wait();case 34:return r.next=36,e.transferSuccess();case 36:r.next=41;break;case 38:throw r.prev=38,r.t0=r["catch"](25),r.t0;case 41:r.next=57;break;case 43:return r.prev=43,h={from:e.ethereumAddress,to:o,value:n,nonce:s.getTransactionCount(e.ethereumAddress,"latest"),gasLimit:e.$ethers.utils.hexlify(i),gasPrice:l},r.next=47,a.sendTransaction(h);case 47:return p=r.sent,r.next=50,p.wait();case 50:return r.next=52,e.transferSuccess();case 52:r.next=57;break;case 54:throw r.prev=54,r.t1=r["catch"](43),r.t1;case 57:r.next=63;break;case 59:r.prev=59,r.t2=r["catch"](2),console.log(r.t2),e.transferError();case 63:case"end":return r.stop()}}),r,null,[[2,59],[25,38],[43,54]])})))()},validate:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.form.validate();case 2:r=e.sent,r&&(t.showPin=!0);case 4:case"end":return e.stop()}}),e)})))()},transferSuccess:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getHistory");case 2:return e.next=4,t.$store.dispatch("getBalance");case 4:return e.next=6,t.app_loading(!1);case 6:return t.reset(),e.next=9,t.alert_show({type:"success",header:"สำเร็จ",title:"โอนสำเร็จ"});case 9:case"end":return e.stop()}}),e)})))()},transferError:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.app_loading(!1),t.alert_show({type:"error",title:"การทำรายการล้มเหลว",header:"ล้มเหลว !"});case 2:case"end":return e.stop()}}),e)})))()},reset:function(){this.$refs.form.reset(),this.$refs.form.resetValidation()}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t.$route.query.to&&(t.form.to=t.$route.query.to);case 1:case"end":return e.stop()}}),e)})))()},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.app_loading(!0),e.next=3,t.$store.dispatch("getHistory");case 3:t.app_loading(!1),t.showPage=!0;case 5:case"end":return e.stop()}}),e)})))()}},R=E,V=(r("b0d2"),r("8336")),T=r("169a"),H=r("4bd4"),N=r("adda"),I=r("2fa4"),q=r("8654"),A=r("71d9"),F=Object(v["a"])(R,s,a,!1,null,null,null);e["default"]=F.exports;m()(F,{VBtn:V["a"],VCard:b["a"],VCol:x["a"],VDialog:T["a"],VForm:H["a"],VIcon:j["a"],VImg:N["a"],VRow:y["a"],VSpacer:I["a"],VTextField:q["a"],VToolbar:A["a"]})}}]);
//# sourceMappingURL=chunk-9deaccac.215f200a.js.map