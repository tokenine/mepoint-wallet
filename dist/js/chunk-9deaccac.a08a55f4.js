(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9deaccac"],{"3b0b":function(e,t,r){},"459b":function(e,t,r){"use strict";r("505c")},"505c":function(e,t,r){},"51d7":function(e,t,r){},"5e23":function(e,t,r){},"71d9":function(e,t,r){"use strict";var n=r("3835"),s=r("5530"),a=(r("a9e3"),r("e25e"),r("0481"),r("4160"),r("5e23"),r("8dd9")),o=r("adda"),i=r("80d2"),c=r("d9bd");t["a"]=a["a"].extend({name:"v-toolbar",props:{absolute:Boolean,bottom:Boolean,collapse:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{default:48,type:[Number,String]},flat:Boolean,floating:Boolean,prominent:Boolean,short:Boolean,src:{type:[String,Object],default:""},tag:{type:String,default:"header"}},data:function(){return{isExtended:!1}},computed:{computedHeight:function(){var e=this.computedContentHeight;if(!this.isExtended)return e;var t=parseInt(this.extensionHeight);return this.isCollapsed?e:e+(isNaN(t)?0:t)},computedContentHeight:function(){return this.height?parseInt(this.height):this.isProminent&&this.dense?96:this.isProminent&&this["short"]?112:this.isProminent?128:this.dense?48:this["short"]||this.$vuetify.breakpoint.smAndDown?56:64},classes:function(){return Object(s["a"])(Object(s["a"])({},a["a"].options.computed.classes.call(this)),{},{"v-toolbar":!0,"v-toolbar--absolute":this.absolute,"v-toolbar--bottom":this.bottom,"v-toolbar--collapse":this.collapse,"v-toolbar--collapsed":this.isCollapsed,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--flat":this.flat,"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.isProminent})},isCollapsed:function(){return this.collapse},isProminent:function(){return this.prominent},styles:function(){return Object(s["a"])(Object(s["a"])({},this.measurableStyles),{},{height:Object(i["f"])(this.computedHeight)})}},created:function(){var e=this,t=[["app","<v-app-bar app>"],["manual-scroll",'<v-app-bar :value="false">'],["clipped-left","<v-app-bar clipped-left>"],["clipped-right","<v-app-bar clipped-right>"],["inverted-scroll","<v-app-bar inverted-scroll>"],["scroll-off-screen","<v-app-bar scroll-off-screen>"],["scroll-target","<v-app-bar scroll-target>"],["scroll-threshold","<v-app-bar scroll-threshold>"],["card","<v-app-bar flat>"]];t.forEach((function(t){var r=Object(n["a"])(t,2),s=r[0],a=r[1];e.$attrs.hasOwnProperty(s)&&Object(c["a"])(s,a,e)}))},methods:{genBackground:function(){var e={height:Object(i["f"])(this.computedHeight),src:this.src},t=this.$scopedSlots.img?this.$scopedSlots.img({props:e}):this.$createElement(o["a"],{props:e});return this.$createElement("div",{staticClass:"v-toolbar__image"},[t])},genContent:function(){return this.$createElement("div",{staticClass:"v-toolbar__content",style:{height:Object(i["f"])(this.computedContentHeight)}},Object(i["l"])(this))},genExtension:function(){return this.$createElement("div",{staticClass:"v-toolbar__extension",style:{height:Object(i["f"])(this.extensionHeight)}},Object(i["l"])(this,"extension"))}},render:function(e){this.isExtended=this.extended||!!this.$scopedSlots.extension;var t=[this.genContent()],r=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return this.isExtended&&t.push(this.genExtension()),(this.src||this.$scopedSlots.img)&&t.unshift(this.genBackground()),e(this.tag,r,t)}})},"8ce9":function(e,t,r){},"954f":function(e,t,r){"use strict";r("3b0b")},"99d9":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("b0af"),s=r("80d2"),a=Object(s["g"])("v-card__actions"),o=Object(s["g"])("v-card__subtitle"),i=Object(s["g"])("v-card__text"),c=Object(s["g"])("v-card__title");n["a"]},b0d2:function(e,t,r){"use strict";r("51d7")},ce7e:function(e,t,r){"use strict";var n=r("5530"),s=(r("8ce9"),r("7560"));t["a"]=s["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(e){var t;return this.$attrs.role&&"separator"!==this.$attrs.role||(t=this.vertical?"vertical":"horizontal"),e("hr",{class:Object(n["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(n["a"])({role:"separator","aria-orientation":t},this.$attrs),on:this.$listeners})}})},fe5e:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"transfer-page"},[r("layout",{class:{blur:e.showPin},attrs:{header:e.tokenByName.name,receive:!0},on:{onBack:function(t){return e.$router.push("/")},receive:function(t){e.dialog=!0}},scopedSlots:e._u([{key:"content",fn:function(){return[r("v-col",{attrs:{cols:"12",xs:"12",sm:"8",md:"6",lg:"4"}},[r("v-row",{staticClass:"pb-5",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"box-detail",attrs:{elevation:"0"}},[r("v-toolbar",{attrs:{color:"#c71e2b",dark:""}},[r("div",[e._v(" Balance : "+e._s(e.parseUtillETH(e.tokenByName.balance))+" ")]),r("v-spacer"),r("div",[r("v-img",{attrs:{src:e.tokenByName.logoURI,height:"30px",width:"30px",contain:""}})],1)],1),r("div",{staticClass:"pa-4 mt-4"},[r("v-form",{ref:"form",staticClass:"text-right",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{outlined:"","background-color":"white",rules:e.itemRules,label:"หมายเลขกระเป๋า",required:""},model:{value:e.form.to,callback:function(t){e.$set(e.form,"to",t)},expression:"form.to"}}),r("v-text-field",{attrs:{type:"number",outlined:"","background-color":"white",rules:[function(e){return!!e||"กรุณากรอกข้อมูล"},function(e){return parseFloat(e)>0||"จำนวนต้องมากกว่า 0"},function(t){return parseFloat(t)<=parseFloat(e.parseUtillETH(e.tokenByName.balance))||"จำนวนไม่ถูกต้อง"}],label:"จำนวน",required:""},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}}),r("v-btn",{staticClass:"mr-2",attrs:{text:""},on:{click:e.reset}},[e._v(" เคลียร์ ")]),r("v-btn",{staticClass:"ml-2",attrs:{disabled:!e.valid,color:"#c71e2b"},on:{click:e.validate}},[r("span",{staticClass:"white--text"},[e._v(" โอนเหรียญ ")])])],1)],1)],1)],1),r("v-col",{directives:[{name:"show",rawName:"v-show",value:e.showPage,expression:"showPage"}],staticClass:"mt-30",attrs:{cols:"12"}},[r("div",{staticClass:"d-flex align-center"},[r("v-icon",{attrs:{large:""}},[e._v(" history ")]),r("span",{staticClass:"ml-1"},[e._v("ประวัติการทำทำรายการ")])],1),r("v-card",{staticClass:"box-detail mt-2",attrs:{elevation:"0"}},[e.historyByToken.length>0?r("div",e._l(e.historyByToken,(function(t,n){return r("history-item",{key:"historyByToken"+n,attrs:{hash:t.hash,from:t.from,timeStamp:t.timeStamp,tokenSymbol:t.tokenSymbol,value:t.value,lastChild:n>=e.historyByToken.length-1}})})),1):r("div",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"100px"}},[e._v(" ไม่มีข้อมูล... ")])])],1)],1)],1)]},proxy:!0}])}),e.showPin?r("pin-pad",{attrs:{header:"กรุณาใส่รหัส",verify:!0,backward:!0},on:{goback:function(t){e.showPin=!1},verifyPin:e.sendToken}}):e._e(),r("v-dialog",{attrs:{"max-width":"350"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("my-qrcode",{attrs:{value:JSON.stringify({type:"transfer",to:e.ethereumAddress,contractAddress:e.tokenByName.address})}})],1)],1)},s=[],a=r("1da1"),o=(r("96cf"),r("e25e"),r("0d03"),r("d3b7"),r("25f0"),r("b0c0"),r("4795"),r("08cd")),i=r("6b31"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-text",[r("v-row",{staticClass:"pt-5",attrs:{justify:"center"}},[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("qrcode",{attrs:{value:e.value,options:{width:200}}})],1),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("p",[e._v("หมายเลขกระเป๋าของฉัน")]),r("input",{ref:"ethWallet",staticClass:"input-wallet",attrs:{type:"text",readonly:""},domProps:{value:e.ethereumAddress},on:{click:e.Copy}})])],1)],1)],1)},l=[],u=r("b2e5"),d=r.n(u),h={name:"QRCODE",props:{value:{type:String,default:""}},components:{qrcode:d.a},methods:{Copy:function(){try{this.$refs.ethWallet.select(),document.execCommand("copy"),this.alert_show({type:"success",title:"Copied on clipboard !"})}catch(e){}}}},p=h,m=(r("459b"),r("2877")),f=r("6544"),v=r.n(f),g=r("b0af"),b=r("99d9"),w=r("62ad"),x=r("0fd9"),y=Object(m["a"])(p,c,l,!1,null,null,null),k=y.exports;v()(y,{VCard:g["a"],VCardText:b["a"],VCol:w["a"],VRow:x["a"]});var C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"historyItem",attrs:{"no-gutters":"",align:"center"},on:{click:function(t){return e.openLink(e.hash)}}},[r("v-col",{attrs:{cols:"1"}},[r("div",{staticClass:"icon-shuff"},[e.checkOut(e.from)?r("v-icon",{attrs:{dark:"",color:"#FF9300",size:"28"}},[e._v(" remove_circle ")]):r("v-icon",{attrs:{dark:"",color:"#31B7C0",size:"28"}},[e._v(" add_circle ")])],1)]),r("v-col",{staticClass:"detail-body",attrs:{cols:"8"}},[r("div",[e._v("Tx hash: "+e._s(e.hash))]),r("div",[e._v(" "+e._s(e.DateTime(new Date(1e3*parseInt(e.timeStamp))))+" ")])]),r("v-col",{staticClass:"text-right",attrs:{cols:"3"}},[r("span",{staticClass:"d-block w-100 money text-xs-right",class:{wd:e.checkOut(e.from)}},[e._v(e._s(e.checkOut(e.from)?"-":"+")+" "+e._s(e.parseUtillETH(e.value)))]),r("span",{staticClass:"sk text-xs-right",class:{wd:e.checkOut(e.from)}},[r("span",[e._v(e._s(e.tokenSymbol))])])]),e.lastChild?e._e():r("v-col",{staticClass:"pt-2 px-2",attrs:{cols:"12"}},[r("v-divider")],1)],1)},_=[],$={name:"HistoryItem",props:{hash:{type:String,default:""},from:{type:String,default:""},timeStamp:{type:String,default:""},value:{type:String,default:"0"},tokenSymbol:{type:String,default:"XTH"},lastChild:{type:Boolean,default:!1}},methods:{openLink:function(e){window.open("https://exp.xchain.asia/tx/"+e,"_blank")},checkOut:function(e){return console.log(),e.toLowerCase()===String(this.ethereumAddress).toLowerCase()}}},S=$,O=(r("954f"),r("ce7e")),B=r("132d"),j=Object(m["a"])(S,C,_,!1,null,null,null),T=j.exports;v()(j,{VCol:w["a"],VDivider:O["a"],VIcon:B["a"],VRow:x["a"]});var R={name:"Token",components:{layout:o["a"],"pin-pad":i["a"],"my-qrcode":k,"history-item":T},data:function(){return{dialog:!1,showPin:!1,showPage:!1,valid:!0,itemRules:[function(e){return!!e||"กรุณากรอกข้อมูล"},function(e){return/^0x[a-fA-F0-9]{40}$/g.test(e)||"กรุณากรอกข้อมูลให้ถูกต้อง"}],form:{to:null,amount:null,text:null},transferInstance:null,wsProvider:null,contract:null}},computed:{tokenByName:function(){return this.$store.getters.tokenByName(this.$route.params.token)},historyByToken:function(){return this.$store.getters.historyByToken(this.tokenByName.address)}},methods:{sendToken:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s,a,o,i,c,l,u,d,h,p,m,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.status){r.next=72;break}return t.showPin=!1,r.prev=2,r.next=5,t.app_loading(!0);case 5:return r.next=7,t.$ethers.Wallet.fromEncryptedJson(localStorage.getItem("encypt_string_mpv"),e.password);case 7:return n=r.sent,r.next=10,n.privateKey;case 10:return s=r.sent,r.next=13,new t.$ethers.providers.JsonRpcProvider("https://rpc.tbwg.io");case 13:return a=r.sent,r.next=16,new t.$ethers.Wallet(s,a);case 16:return o=r.sent,r.next=19,t.$ethers.utils.parseUnits(t.form.amount,18);case 19:return i=r.sent,r.next=22,t.form.to;case 22:return c=r.sent,l="0x100000",r.next=26,t.app_loading(!0);case 26:return r.next=28,a.getGasPrice();case 28:return u=r.sent,r.next=31,t.$ethers.utils.hexlify(parseInt(u));case 31:if(d=r.sent,"mainnet"==t.tokenByName.address){r.next=51;break}return r.prev=33,r.next=36,new t.$ethers.Contract(t.tokenByName.address,t.$abi,o);case 36:return h=r.sent,r.next=39,h.transfer(c,i);case 39:return p=r.sent,r.next=42,p.wait();case 42:return r.next=44,t.transferSuccess();case 44:r.next=49;break;case 46:throw r.prev=46,r.t0=r["catch"](33),r.t0;case 49:r.next=65;break;case 51:return r.prev=51,m={from:t.ethereumAddress,to:c,value:i,nonce:a.getTransactionCount(t.ethereumAddress,"latest"),gasLimit:t.$ethers.utils.hexlify(l),gasPrice:d},r.next=55,o.sendTransaction(m);case 55:return f=r.sent,r.next=58,f.wait();case 58:return r.next=60,t.transferSuccess();case 60:r.next=65;break;case 62:throw r.prev=62,r.t1=r["catch"](51),r.t1;case 65:t.writeCookies(e.password),r.next=72;break;case 68:r.prev=68,r.t2=r["catch"](2),console.log(r.t2),t.transferError();case 72:case"end":return r.stop()}}),r,null,[[2,68],[33,46],[51,62]])})))()},validate:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:r=t.sent,n=e.$cookies.get("pin_mpv"),r&&(null==n?e.showPin=!0:(s=e,e.alert_show({type:"confirm",header:"กรุณายืนยัน",title:"ท่านต้องการที่จะทำรายการใช่หรือไหม ?"}).then((function(e){if(e){var t={status:!0,password:n};s.sendToken(t)}}))));case 5:case"end":return t.stop()}}),t)})))()},writeCookies:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$cookies.set("pin_mpv",e,"15min");case 1:case"end":return r.stop()}}),r)})))()},transferSuccess:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.app_loading(!1);case 2:return e.reset(),t.next=5,e.alert_show({type:"success",header:"สำเร็จ",title:"โอนสำเร็จ"});case 5:case"end":return t.stop()}}),t)})))()},transferError:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.app_loading(!1),e.alert_show({type:"error",title:"การทำรายการล้มเหลว",header:"ล้มเหลว !"});case 2:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset(),this.$refs.form.resetValidation()}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!=e.$route.query.to&&(e.form.to=e.$route.query.to),e.$nextTick((function(){var t=e,r=function e(){t.wsProvider=new t.$ethers.providers.WebSocketProvider("wss://ws.xchain.asia"),"mainnet"!=t.tokenByName.address?(t.contract=new t.$ethers.Contract(t.tokenByName.address,t.$abi,t.wsProvider),t.contract.on("*",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.args.to;case 2:return n=e.sent,e.next=5,r.args.tokens.toString();case 5:return s=e.sent,e.next=8,t.$store.dispatch("getHistory");case 8:return e.next=10,t.$store.dispatch("getBalance");case 10:if("Transfer"!=r.event||String(n).toLowerCase()!=String(t.ethereumAddress).toLowerCase()){e.next=13;break}return e.next=13,t.$store.commit("SET_ALERT_TOAST",{status:!0,tokenName:t.tokenByName.name,tokenSymbol:t.tokenByName.symbol,amount:s});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):t.wsProvider.on("pending",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.wsProvider.getTransaction(r);case 2:return n=e.sent,e.next=5,t.wsProvider.once(r,function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(String(r.to).toLowerCase()!=String(t.ethereumAddress).toLowerCase()&&String(r.from).toLowerCase()!=String(t.ethereumAddress).toLowerCase()){e.next=11;break}return e.next=3,t.$store.dispatch("getHistory");case 3:return e.next=5,t.$store.dispatch("getBalance");case 5:if(String(r.to).toLowerCase()!=String(t.ethereumAddress).toLowerCase()){e.next=11;break}return e.next=8,n.value.toString();case 8:return s=e.sent,e.next=11,t.$store.commit("SET_ALERT_TOAST",{status:!0,tokenName:"XTH",tokenSymbol:"XTH",amount:s});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.wsProvider.on("error",Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Unable to connect to ".concat(ep.subdomain," retrying in 3s...")),setTimeout(e,3e3);case 2:case"end":return t.stop()}}),t)})))),t.wsProvider.on("close",function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log("Connection lost with code ".concat(n,"! Attempting reconnect in 3s...")),t.wsProvider.terminate(),setTimeout(e,3e3);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())};r()}));case 2:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.app_loading(!0),t.next=3,e.$store.dispatch("getHistory");case 3:e.app_loading(!1),e.showPage=!0;case 5:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.wsProvider.off()}},P=R,E=(r("b0d2"),r("8336")),N=r("169a"),V=r("4bd4"),H=r("adda"),A=r("2fa4"),L=r("8654"),I=r("71d9"),q=Object(m["a"])(P,n,s,!1,null,null,null);t["default"]=q.exports;v()(q,{VBtn:E["a"],VCard:g["a"],VCol:w["a"],VDialog:N["a"],VForm:V["a"],VIcon:B["a"],VImg:H["a"],VRow:x["a"],VSpacer:A["a"],VTextField:L["a"],VToolbar:I["a"]})}}]);
//# sourceMappingURL=chunk-9deaccac.a08a55f4.js.map